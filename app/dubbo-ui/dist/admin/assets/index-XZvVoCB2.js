import{d as b,k as R,r as w,O as S,f as s,c as t,t as n,h as i,P as g,K as G,e as h,o as l,Q as y,y as r,H as O,I as T,z as f,J as m,F as k,m as V,_ as $}from"./index-PIJJkkQe.js";import{s as D,d as E}from"./traffic-W0KeQm-r.js";import{S as A,a as P,s as p}from"./SearchUtil-x5OY2Hus.js";import"./request-5Xt99UU9.js";const B={class:"__container_resources_application_index"},M=["onClick"],Y=b({__name:"index",setup(F){R(e=>({b8dbe570:i(g)}));let N=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,a)=>p(e.appName,a.appName),width:140},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,a)=>a.isService?"服务":"应用",width:100,sorter:(e,a)=>p(e.instanceNum,a.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:120,sorter:(e,a)=>p(e.instanceNum,a.instanceNum)},{title:"enable",key:"enable",dataIndex:"enable",render:(e,a)=>a.enable?"是":"否",width:120,sorter:(e,a)=>p(e.instanceNum,a.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const c=w(new A([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],D,N)),C=async e=>{(await E(e)).code===200&&await c.onSearch()};S(()=>{c.onSearch()});const I=e=>{C(e)};return G(V.SEARCH_DOMAIN,c),(e,a)=>{const d=h("a-button"),v=h("a-popconfirm");return l(),s("div",B,[t(P,{"search-domain":c},{customOperation:n(()=>[t(d,{type:"primary",onClick:a[0]||(a[0]=u=>i(y).push("/traffic/addRoutingRule"))},{default:n(()=>[r("新增条件路由规则")]),_:1})]),bodyCell:n(({text:u,column:o,record:_})=>[o.dataIndex==="ruleName"?(l(),s("span",{key:0,class:"rule-link",onClick:x=>i(y).push(`formview/${_[o.key]}`)},[O("b",null,[t(i(T),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),r(" "+f(u),1)])],8,M)):m("",!0),o.dataIndex==="ruleGranularity"?(l(),s(k,{key:1},[r(f(u?"服务":"应用"),1)],64)):m("",!0),o.dataIndex==="enable"?(l(),s(k,{key:2},[r(f(u?"启用":"禁用"),1)],64)):m("",!0),o.dataIndex==="operation"?(l(),s(k,{key:3},[t(d,{type:"link",onClick:x=>i(y).replace(`formview/${_.ruleName}`)},{default:n(()=>[r(" 查看 ")]),_:2},1032,["onClick"]),t(d,{type:"link"},{default:n(()=>[r("修改")]),_:1}),t(v,{title:"确认删除该条件路由规则？","ok-text":"Yes","cancel-text":"No",onConfirm:x=>I(_.ruleName)},{default:n(()=>[t(d,{type:"link"},{default:n(()=>[r(" 删除 ")]),_:1})]),_:2},1032,["onConfirm"])],64)):m("",!0)]),_:1},8,["search-domain"])])}}}),L=$(Y,[["__scopeId","data-v-80f5e94a"]]);export{L as default};
